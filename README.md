# referral-system

Простая реферальная система с минимальным интерфейсом.

Версия для тестирования в
сети - https://ref-sys.zihuatanejo.ru/api/schema/redoc/

## Стек

- Python
- Django
- DRF
- Simple JWT
- drf-spectacular
- PostgreSQL

## Техническое задание

Реализовать простую реферальную систему. Минимальный интерфейс для
тестирования.

Реализовать логику и API для следующего функционала:

- Авторизация по номеру телефона. Первый запрос на ввод номера телефона.
  Имитировать отправку 4-х значного кода авторизации (задержку на сервере 1-2
  сек). Второй запрос на ввод кода. Если пользователь ранее не авторизовывался,
  то записать его в бд.
- Запрос на профиль пользователя.
- Пользователю нужно при первой авторизации присвоить рандомно
  сгенерированный 6-значный инвайт-код (цифры и символы).
- В профиле у пользователя должна быть возможность ввести чужой инвайт-код (при
  вводе проверять на существование). В своем профиле можно активировать только
  1 инвайт-код, если пользователь уже когда-то активировал инвайт код, то нужно
  выводить его в соответсвующее поле в запросе на профиль пользователя.
- В API профиля должен выводиться список пользователей (номеров телефона),
  которые ввели инвайт код текущего пользователя.
- Реализовать и описать в readme Api для всего функционала.
- Создать и прислать Postman коллекцию со всеми запросами.
- Залить в сеть, чтобы удобнее было тестировать (например бесплатно
  на https://www.pythonanywhere.com или heroku).

Опционально:

- Интерфейс на Django Templates
- Документирование апи при помощи ReDoc
- Docker

## Локальный запуск проекта

Клонируйте репозиторий:

```bash
git clone git@github.com:galirkil/referral-system.git
```

Перейдите в папку с проектом, установите и активируйте виртуальное окружение:

```bash
cd referral-system
python3 -m venv venv
source venv/bin/activate
```

Установите зависимости:

```bash
pip install -r requirements.txt
```

Создайте и заполните файл `.env` в корневой папке проекта по шаблону:

```env
DEBUG=
SECRET_KEY=
DATABASE_NAME=
DATABASE_USER=
DATABASE_PASSWORD=
HOST=
PORT=
```

Выполните миграции:

```bash
python3 manage.py makemigrations
python3 manage.py migrate
```

Создайте суперпользователя:

```bash
python3 manage.py createsuperuser
```

Запустите сервер:

```bash
python3 manage.py runserver
```

## Документация API

Документация API приложения доступна по
ссылке - http://localhost:8000/api/schema/redoc/